==============================================================
     S&P 500 OPTIONS SCANNER - COMPLETE RUNNING GUIDE
==============================================================

STEP 1: OPEN TERMINAL
---------------------
- Mac: Press Cmd+Space, type "Terminal", press Enter
- Windows: Press Win+R, type "cmd", press Enter
- Linux: Press Ctrl+Alt+T

STEP 2: NAVIGATE TO PROJECT FOLDER
----------------------------------
cd /Users/rchakraborty/my-project/TradingAnalytics

STEP 3: ACTIVATE PYTHON ENVIRONMENT
-----------------------------------
source venv/bin/activate

(You should see (venv) appear in your terminal)

STEP 4: RUN THE SCANNER
-----------------------
python sp500_options_scanner.py

STEP 5: WAIT FOR RESULTS
------------------------
The scanner will:
1. Check market regime (3 factors) - 5 seconds
2. Connect to Alpaca - 2 seconds
3. Fetch S&P 500 list - 3 seconds
4. Analyze each stock - 45-60 seconds
5. Display comprehensive results
6. Save to CSV file

==============================================================
                 ALL RUNNING OPTIONS
==============================================================

STANDARD SCAN (with market regime check):
python sp500_options_scanner.py

DEMO MODE (no API needed, skips market check):
python sp500_options_scanner.py --demo

QUICK MODE (uses cached data for speed):
python sp500_options_scanner.py --quick

REGIME CHECK ONLY (no scan):
python sp500_options_scanner.py --regime-only

FAST REGIME (skip breadth calculation):
python sp500_options_scanner.py --fast-regime

WARM CACHE (pre-calculate market breadth):
python sp500_options_scanner.py --warm-cache

CONTINUOUS MODE (auto-refresh every 30 min):
python sp500_options_scanner.py --continuous

SCANNER MODE OPTIONS (NEW - Adaptive Dual-Mode):
python sp500_options_scanner.py --mode adaptive  # Auto-detect market (default)
python sp500_options_scanner.py --mode bullish   # Force bullish mode
python sp500_options_scanner.py --mode bearish   # Force bearish mode
python sp500_options_scanner.py --bearish        # Shortcut for bearish mode
python sp500_options_scanner.py --mode mixed     # Show both bullish & bearish

WATCHLIST OPTIONS (NEW - Custom Stock Lists):
python sp500_options_scanner.py --watchlist tech.txt         # Scan tech watchlist
python sp500_options_scanner.py --watchlist energy.txt       # Scan energy stocks
python sp500_options_scanner.py --watchlist my_stocks.txt    # Scan personal list
python sp500_options_scanner.py --watchlist /path/to/list.txt # Use full path
python sp500_options_scanner.py --watchlist tech.txt --no-regime  # Skip market check

DISPLAY OPTIONS:
python sp500_options_scanner.py --top 30         # Show top 30 results
python sp500_options_scanner.py --export         # Auto-export to CSV
python sp500_options_scanner.py --filter BUY     # Filter specific signals

COMBINATIONS:
python sp500_options_scanner.py --demo --continuous
python sp500_options_scanner.py --regime-only --fast-regime
python sp500_options_scanner.py --quick --continuous
python sp500_options_scanner.py --mode bearish --top 30
python sp500_options_scanner.py --demo --mode mixed --export
python sp500_options_scanner.py --watchlist tech.txt --mode bearish
python sp500_options_scanner.py --watchlist my_stocks.txt --top 10 --export
python sp500_options_scanner.py --watchlist energy.txt --no-regime --demo

==============================================================
                  EXPECTED OUTPUT - NEW FORMAT
==============================================================

1. MARKET REGIME CHECK (First Thing You See):
============================================================
MARKET REGIME ANALYSIS
============================================================
📊 SPY Trend:      ✅ $450.25 > $445.30 (+1.1%)
📈 Market Breadth: ✅ 65.2% stocks > 50MA
😨 VIX Level:      ✅ 18.5 (below 25)
============================================================
✅ MARKET REGIME: BULLISH (3/3 factors positive)
Proceeding with bullish opportunity scan...

2. PROGRESS BAR:
Scanning: 45%|████████████░░░░░| 225/503 [00:21<00:26]

3. ENHANCED DASHBOARD:
╔═══════════════════════════════════════════════════════╗
║      S&P 500 Intraday Options Scanner                 ║
║                                                        ║
║   Market Status: OPEN    Time: 10:45 AM ET            ║
╚═══════════════════════════════════════════════════════╝

╭─────────── 📈 How Scoring Works ──────────────────────╮
│                                                        │
│ Scoring System Breakdown:                             │
│                                                        │
│ 📊 Composite Score =                                  │
│    MACD (30%) + RSI (30%) + Bollinger (20%) +        │
│    OBV (10%) + ATR (10%)                             │
│                                                        │
│ Individual Indicators:                                │
│ • RSI: 100pts if oversold (<30)                      │
│ • MACD: 100pts if bullish crossover                  │
│ • Bollinger: 100pts at lower band                    │
│ • OBV: 100pts if above 20-SMA                        │
│ • ATR: 100pts if expanding                           │
│                                                        │
│ Signal Thresholds:                                    │
│ • STRONG BUY: Score > 85                             │
│ • BUY: Score 70-85                                   │
│ • HOLD: Score 30-70                                  │
│ • AVOID: Score < 30                                  │
╰────────────────────────────────────────────────────────╯

TOP OPTIONS TRADING SIGNALS (ADAPTIVE MODE)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Rank Ticker Price   Chg%  Score RSI MACD BB OBV VOL ATR$  Strategy
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
BULLISH MODE (when market is bullish):
1    AAPL  $175.32 -2.1%  92.5 100 100  85 100 100 $3.4↑ SELL PUT / BUY CALL
2    MSFT  $382.15 -1.8%  78.5  75 100  70 100  50 $5.2↓ BUY CALL

BEARISH MODE (when market is bearish - current):
1    WBA   $11.65  +1.3%  86.2  75 100  77 100   0 $0.2↑ BEAR SPREAD / BUY PUT
2    LDOS  $175.90 +9.2%  85.9  75 100  68 100   0 $0.6↑ BEAR SPREAD / BUY PUT
3    COST  $974.21 +2.5%  78.2  65 100  60 100   0 $2.9↑ BUY OTM PUT

MIXED MODE (shows both in separate tables):
🟢 BULLISH OPPORTUNITIES (Uptrending Stocks)
1    AAPL  $175.32 +2.1%  85.5  25   0  20 100 100 $3.4↑ SELL PUT / BUY CALL

🔴 BEARISH OPPORTUNITIES (Downtrending Stocks)
1    TSLA  $242.18 -3.5%  82.0  75 100  80   0   0 $8.7↓ BUY PUT / SELL CALL

Color Legend:
• Green (80-100): Strong signal
• Yellow (1-79): Moderate signal
• Red (0): No signal
• ↑ = Volatility expanding (good for buying options)
• ↓ = Volatility contracting (good for selling options)

4. SUMMARY:
✓ Scan complete. Found 489 stocks with valid data.
Strong Buy signals: 3 | Buy signals: 35

Results saved to: output/intraday_scans/sp500_scan_2025-08-06_1045.csv

==============================================================
              UNDERSTANDING THE OUTPUT
==============================================================

ADAPTIVE MODE (NEW FEATURE):
The scanner now automatically detects market conditions and adjusts:
• BULLISH MARKET → Shows SELL PUT / BUY CALL opportunities
• BEARISH MARKET → Shows BUY PUT / SELL CALL opportunities  
• MIXED MARKET → Shows both, but only for trend-confirmed stocks

MODE DETECTION:
• Adaptive (default): Auto-detects based on market regime
• Bullish: Force bullish signals only
• Bearish: Force bearish signals only
• Mixed: Show both types in separate tables

MARKET REGIME (3 Factors):
• SPY > 50-day MA ✅ = Bullish trend
• >60% stocks > 50MA ✅ = Strong breadth
• VIX < 25 ✅ = Low fear
→ If <2 factors positive = BEARISH MODE
→ If all 3 positive = BULLISH MODE
→ If 2/3 positive = MIXED MODE

SCORING DIFFERENCES BY MODE:
BULLISH MODE:
• RSI: 100pts if oversold (<30), 0pts if overbought (>70)
• MACD: 100pts if bullish crossover
• BB: 100pts at lower band (oversold)

BEARISH MODE (inverted scoring):
• RSI: 100pts if overbought (>70), 0pts if oversold (<30)
• MACD: 100pts if bearish crossover
• BB: 100pts at upper band (overbought)

MIXED MODE:
• Only shows stocks with confirmed trends
• Bullish signals for uptrending stocks only
• Bearish signals for downtrending stocks only

OPTION STRATEGIES:
Bullish Strategies:
• SELL PUT / BUY CALL: Strong bullish (>85)
• BUY CALL: Moderate bullish (70-85)
• BULL SPREAD: Mild bullish (50-70)

Bearish Strategies:
• BEAR SPREAD / BUY PUT: Strong bearish (>85)
• BUY OTM PUT: Moderate bearish (70-85)
• BUY PUT / SELL CALL: Mild bearish (50-70)

VOLATILITY (ATR$):
• ↑ = Expanding (buy options)
• ↓ = Contracting (sell options)

==============================================================
                  TROUBLESHOOTING
==============================================================

ERROR: "Market Regime is NOT BULLISH"
→ Market conditions unfavorable, scanner halts
→ Try: python sp500_options_scanner.py --demo

ERROR: "ModuleNotFoundError"
→ Virtual environment not activated
→ Run: source venv/bin/activate

ERROR: "Rate limit exceeded"
→ Too many API calls
→ Try: python sp500_options_scanner.py --quick

SLOW PERFORMANCE:
→ Use quick mode: python sp500_options_scanner.py --quick
→ Skip breadth: python sp500_options_scanner.py --fast-regime

==============================================================
                 CREATING WATCHLIST FILES
==============================================================

LOCATION: watchlists/ folder in project directory

FORMAT: Simple text file with one ticker per line
- Use # for comments
- Blank lines are ignored
- Ticker symbols are automatically converted to uppercase

EXAMPLE watchlists/tech.txt:
# Major tech companies
AAPL
MSFT
GOOGL

# Semiconductors
NVDA
AMD

INCLUDED SAMPLE FILES:
- tech.txt: Technology stocks (AAPL, MSFT, NVDA, etc.)
- energy.txt: Energy sector (XOM, CVX, ENPH, etc.)
- my_stocks.txt: Example personal portfolio

CREATE YOUR OWN:
1. Create a new .txt file in watchlists/ folder
2. Add one ticker symbol per line
3. Use # for comments/organization
4. Save and run: python sp500_options_scanner.py --watchlist yourfile.txt

==============================================================
                    OUTPUT FILES
==============================================================

CSV RESULTS:
S&P 500 Scans: output/intraday_scans/sp500_scan_YYYY-MM-DD_HHMM.csv
Watchlist Scans: output/watchlist_scans/[watchlist_name]_scan_YYYY-MM-DD_HHMM.csv

Contains:
- All stock scores and indicators
- Individual indicator scores
- ATR values and trends
- Signal recommendations

ERROR LOG:
logs/error_log.txt

SCANNER LOG:
logs/scanner.log

==============================================================
                     QUICK TIPS
==============================================================

1. Run market check first:
   python sp500_options_scanner.py --regime-only

2. For testing without API:
   python sp500_options_scanner.py --demo

3. For faster scans:
   python sp500_options_scanner.py --quick

4. Pre-calculate breadth overnight:
   python sp500_options_scanner.py --warm-cache

5. Best time to run:
   - 30-60 minutes after market open
   - 1 hour before market close

==============================================================